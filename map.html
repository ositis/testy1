<!DOCTYPE html>
<html>
<head>
    <title>UK Store Network Feasibility</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        #map { height: 100vh; width: 70%; float: left; }
        #sidebar { height: 100vh; width: 30%; float: right; padding: 10px; font-family: Arial; }
        body { margin: 0; overflow: hidden; }
    </style>
</head>
<body>
    <div id="map"></div>
    <div id="sidebar">Click a store to see distances</div>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        var map = L.map('map').setView([54.0, -2.0], 6);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: 'Â© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'
        }).addTo(map);

        // Store data
        let stores = [
            { name: "London", lat: 51.5074, lon: -0.1278 },
            { name: "Edinburgh", lat: 55.9533, lon: -3.1883 },
            { name: "Cardiff", lat: 51.4837, lon: -3.1791 },
            { name: "Belfast", lat: 54.5973, lon: -5.9301 }
        ];

        // Layer to hold lines
        let lineLayer = L.layerGroup().addTo(map);

        // Plot stores
        stores.forEach(store => {
            let marker = L.circleMarker([store.lat, store.lon], {
                color: 'blue',
                radius: 8
            }).addTo(map);

            marker.on('click', () => {
                // Clear previous lines
                lineLayer.clearLayers();

                // Calculate and draw lines to other stores
                let startPoint = L.latLng(store.lat, store.lon);
                let distances = stores
                    .filter(s => s !== store) // Exclude the clicked store
                    .map(s => {
                        let endPoint = L.latLng(s.lat, s.lon);
                        let distanceMeters = startPoint.distanceTo(endPoint);
                        let distanceMiles = (distanceMeters * 0.000621371).toFixed(1); // Convert to miles
                        L.polyline([startPoint, endPoint], { color: 'red' }).addTo(lineLayer);
                        return `${s.name}: ${distanceMiles} miles`;
                    });

                // Update sidebar
                document.getElementById('sidebar').innerHTML = `<h3>${store.name}</h3><ul><li>${distances.join('</li><li>')}</li></ul>`;
            });
        });
    </script>
</body>
</html>
